<link
  rel="stylesheet"
  href="https://fonts.googleapis.com/icon?family=Material+Icons"
/>

<div class="container header"></div>
<h1>List of All Private Events</h1>
<div class="flex-container">
  <mat-card
    *ngFor="let evt of events"
    class="example-card"
    (mouseenter)="
      getNbOfLikesForEvent(evt.event.eventId);
      getNbOfCommentsForEvent(evt.event.eventId)
    "
  >
    <div class="card__content">
      <div class="card__front">
        <div class="favorite">
          <div *ngIf="validateFavorite(evt.event.eventId)">
            <i class="material-icons" style="color: rgb(255, 0, 251)"
              >favorite</i
            >
          </div>
        </div>

        <mat-card-header>
          <mat-card-title
            style="
              font-family: 'Gabriola', sans-serif;
              font-weight: bold;
              font-size: 30px;
            "
            >{{ evt.event.title }}</mat-card-title
          >
        </mat-card-header>
        <img
          class="image"
          mat-card-image
          [src]="getImage(evt.event.image)"
          [alt]="evt.event.image.name"
        />
        <mat-card-content>
          <p>
            {{ evt.event.description }}
          </p>
        </mat-card-content>
      </div>

      <div class="card__back">
        <div class="favorite">
          <div *ngIf="validateFavorite(evt.event.eventId); else elseBlock">
            <button mat-button (click)="deleteFavorite(evt.event)">
              <i class="material-icons" style="color: rgb(255, 0, 251)"
                >favorite</i
              >{{ nbLikes }} Likes
            </button>
          </div>
          <ng-template #elseBlock>
            <button mat-button (click)="addFavorite(evt.event)">
              <mat-icon>favorite_border</mat-icon>{{ nbLikes }} Likes
            </button>
          </ng-template>
        </div>

        <br />
        <br />
        <br />
        <div style="margin-bottom: 6%">
          The Event starts at {{ evt.event.startDate | date }}, <br />
          and its taking place in {{ evt.event.location }} <br />
          and it lasts for {{ evt.event.duration }}.<br />
          Category : {{ evt.event.category.name }}<br />
        </div>

        <div *ngIf="validateRating(evt.event.eventId); else blo">
          <button
            mat-raised-button
            color="accent"
            (click)="openDialog(evt.event)"
          >
            Edit Rating
          </button>
          <button
            mat-raised-button
            color="warn"
            style="margin-left: 8px"
            (click)="deleteRating(evt.event)"
          >
            Delete Rating
          </button>
        </div>

        <ng-template #blo
          ><button
            style="margin-bottom: 6%"
            mat-raised-button
            color="primary"
            (click)="openDialog(evt.event)"
          >
            Add Rating
          </button></ng-template
        >
        <br />
        <button
          mat-raised-button
          style="background-color: lightgrey"
          (click)="showRatings(evt.event)"
        >
          Show Ratings
        </button>
        <br />
        {{ nbComments }} Rating
      </div>
    </div>
  </mat-card>
</div>
